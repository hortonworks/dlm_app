<!--
  ~ /*
  ~  * Copyright  (c) 2016-2017, Hortonworks Inc.  All rights reserved.
  ~  *
  ~  * Except as expressly permitted in a written agreement between you or your company
  ~  * and Hortonworks, Inc. or an authorized affiliate or partner thereof, any use,
  ~  * reproduction, modification, redistribution, sharing, lending or other exploitation
  ~  * of all or any part of the contents of this software is strictly prohibited.
  ~  */
  -->

<div class="assetSearch borderBox" #outerCont>
  <div class="tabCont" #tabCont>
    <div class="tab" [class.active]="activeTab == tabEnum.NORMAL"  (click)="activeTab=tabEnum.NORMAL" data-se="asset_search_tab_basic">{{"pages.dataset.asset-search.search" | translate}}</div>
    <div class="tab" [class.active]="activeTab == tabEnum.ADVANCE" (click)="activeTab=tabEnum.ADVANCE" data-se="asset_search_tab_advanced">{{"pages.dataset.asset-search.advanced" | translate}}</div>
    <div style="clear: both"></div>
  </div>
  <div class="queryEditorCont" #queryEditorCont>
    <normlal-query-editor *ngIf="activeTab == tabEnum.NORMAL"
                          [queryObj]="queryObj"
                          (onQueryObjUpdate)="onSimpleQueryObjUpdate($event)"
                          (onHeightChange)="onQueryEditorResize($event)"
    #basicQueryEditor ></normlal-query-editor>
    <advance-query-editor *ngIf="activeTab == tabEnum.ADVANCE"
                          [queryModel]="queryModel"
                          [clusterId]="clusterId"
                          (onHeightChange)="onQueryEditorResize($event)"
                          (onActionDone)="actionSearch($event)"
    #advanceQueryEditor ></advance-query-editor>
    <div style="clear: both"></div>
  </div>
  <div class="filterActionCont">
    <button class="mdl-button btn-hwx-primary" (click)="actionSearch()" data-se="asset_selection_search">{{"pages.dataset.asset-search.search" | translate}}</button>
    <button class="mdl-button btn-hwx-default" (click)="actionReset()" *ngIf="showQueryResults" data-se="asset_selection_reset">{{"pages.dataset.asset-search.reset" | translate}}</button>
    <span class="emptySearchMsg" #emptySearchMsg>{{"pages.dataset.asset-search.emptySearchMsg" | translate}}</span>
    <div style="clear: both"></div>
  </div>
  <div class="queryResultCont" #queryResultCont>
    <ds-assets-list [hideTabs]="true"
                    [hideSearch]="true"
                    [queryModels]="queryModel"
                    [innerListScrollable]="true"
                    [avoidLoadingOnInit]="true"
                    [clusterId]="clusterId"
                    [allowAssetNavigation]="false"
                    [showBelongsToColumn]="showBelongsToColumn"
      *ngIf="showQueryResults"                    #dsAssetList></ds-assets-list>
    <div *ngIf="!showQueryResults" class="noSearchMessage"><span>{{"pages.dataset.asset-search.noSearchMsg" | translate}}</span></div>
  </div>
  <div class="actionButtonCont" *ngIf="!hideActionButtonCont" >
    <button class="mdl-button btn-hwx-default"  data-se="asset_selection_popup_cancle" (click)="actionCancel()">{{"pages.dataset.asset-search.cancel" | translate}}</button>
    <button *ngIf="showDone && !saveButton" class="mdl-button btn-hwx-primary" data-se="asset_selection_popup_done" (click)="actionDone()">{{"pages.dataset.asset-search.done" | translate}}</button>
    <button *ngIf="showDone && saveButton" class="mdl-button btn-hwx-primary" (click)="actionDone()">{{"common.save" | translate}}</button>
    <div style="clear: both"></div>
  </div>
</div>
