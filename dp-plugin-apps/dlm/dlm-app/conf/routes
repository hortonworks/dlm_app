# Routes
# This file defines all application routes (Higher priority routes first)
# ~~~~

# health
GET     /health                                               controllers.Status.health
GET     /metrics                                              controllers.Status.metrics

#CredentialStore
GET      /api/store/credentials                                       controllers.CredentialStore.listAllCredentialNames
GET      /api/store/credentialAccounts                                controllers.CredentialStore.listAllCredentialAccounts
POST     /api/store/credential                                        controllers.CredentialStore.addCredentialAccount
PUT      /api/store/credential                                        controllers.CredentialStore.updateCredentialAccount
DELETE   /api/store/credential/accountId/:accountId/userName/:name    controllers.CredentialStore.deleteCredentialAccount(accountId : Long, name : String)

#Cloud
GET      /api/cloud/list/buckets/:accountId/username/:userName                controllers.Cloud.listAllBuckets(accountId: Long, userName: String)
GET      /api/cloud/list/objects/:accountId/username/:userName/bucket/:bucketName/files        controllers.Cloud.listAllObjects(accountId: Long, userName: String, bucketName: String)
POST     /api/cloud/userIdentity                                      controllers.Cloud.getUserIdentity
GET      /api/cloud/account/:accountId/username/:userName             controllers.Cloud.checkUserIdentity(accountId: Long, userName: String)
GET      /api/cloud/list/containers/:accountName                             controllers.Cloud.listAllContainers(accountName: String)
GET      /api/cloud/list/blobs/:accountName/container/:containerName/files   controllers.Cloud.listAllBlobs(accountName: String, containerName: String)

#Clusters
GET     /api/clusters                                         controllers.Clusters.list
GET     /api/clusters/status                                  controllers.Clusters.listStatus
GET     /api/clusters/:clusterId/status                       controllers.Clusters.retrieveStatus(clusterId : Long)
GET     /api/clusters/:clusterEndpointId/details/:clusterId   controllers.Clusters.getBeaconClusterDetails(clusterEndpointId : Long, clusterId: Long)


#Pairs
GET     /api/pairs                                            controllers.Pairs.list
POST    /api/pair                                             controllers.Pairs.create
POST    /api/unpair                                           controllers.Pairs.unpair

#Policies
GET     /api/policies                                         controllers.Policies.list
GET     /api/clusters/:clusterId/policy/:name                 controllers.Policies.retrieve(clusterId : Long, name : String)
POST    /api/clusters/:clusterId/policy/:name/submit          controllers.Policies.submit(clusterId: Long, name: String)
PUT     /api/clusters/:clusterId/policy/:name/suspend         controllers.Policies.suspend(clusterId: Long, name: String)
PUT     /api/clusters/:clusterId/policy/:name/resume          controllers.Policies.resume(clusterId: Long, name: String)
DELETE  /api/clusters/:clusterId/policy/:name                 controllers.Policies.delete(clusterId: Long, name: String)

#Policy instances
GET     /api/clusters/:clusterId/policy/:name/jobs            controllers.PolicyInstances.retrieve(clusterId : Long, name : String)
GET     /api/clusters/:clusterId/jobs                         controllers.PolicyInstances.list(clusterId : Long)
PUT     /api/clusters/:clusterId/policy/:name/jobs/abort      controllers.PolicyInstances.abort(clusterId : Long, name : String)
POST     /api/clusters/:clusterId/policy/:name/jobs/rerun     controllers.PolicyInstances.rerun(clusterId : Long, name : String)


#Events
GET     /api/events                                               controllers.Events.list

#Logs
GET     /api/clusters/:clusterId/logs                             controllers.Logs.retrieve(clusterId: Long)

#Admin
GET    /api/beacon/admin/status                                    controllers.Admin.listStatus

#HdfsFiles
GET     /api/clusters/:clusterId/hdfs/file                     controllers.HdfsFiles.retrieve(clusterId: Long)

#HiveDatabases
GET     /api/clusters/:clusterId/hive/databases                   controllers.HiveDatabases.retrieveDb(clusterId: Long)
GET     /api/clusters/:clusterId/hive/database/:dbName/tables     controllers.HiveDatabases.retrieveDbTables(clusterId: Long, dbName: String)

#YarnQueues

GET     /api/clusters/:clusterId/yarn/queues                      controllers.YarnQueues.retrieve(clusterId: Long)

#Cloud

# Due to the regex involved, Following should be always placed at the end of the file
# static resources
# @TODO: Replace `/usr/dlm-web` with env variable DLM_WEB_HOME
#        which will be set in prod env and will be referred in `StaticAssets.at` method
GET      /                                                        controllers.StaticAssets.at(path="/usr/dlm-web", file="index.html")
GET     /dlm/*file                                                controllers.StaticAssets.at(path="/usr/dlm-web", file)
GET     /*file                                                    controllers.StaticAssets.at(path="/usr/dlm-web", file)
