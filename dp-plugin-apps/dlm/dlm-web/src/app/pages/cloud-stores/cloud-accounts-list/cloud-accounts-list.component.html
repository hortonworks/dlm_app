<!--
  ~ Copyright  (c) 2016-2017, Hortonworks Inc.  All rights reserved.
  ~
  ~ Except as expressly permitted in a written agreement between you or your company
  ~ and Hortonworks, Inc. or an authorized affiliate or partner thereof, any use,
  ~ reproduction, modification, redistribution, sharing, lending or other exploitation
  ~ of all or any part of the contents of this software is strictly prohibited.
  -->

<dlm-table
  [rowDetailHeight]="660"
  [rowDetailTemplate]="rowDetailRef"
  [theme]="tableTheme"
  [columns]="columns"
  [columnMode]="columnMode"
  [rows]="accounts">
</dlm-table>

<ng-template #nameCell let-account="row">
  <p>
    <span *ngIf="account.accountDetails.userName">{{account.accountDetails.userName}}</span>
    <span *ngIf="account.accountDetails.accountName">{{account.accountDetails.accountName}}</span>
  </p>
  <p *ngIf="account.accountDetails.accountId">{{account.accountDetails.accountId}}</p>
</ng-template>

<ng-template #backetsCell let-backetsCount="value" let-account="row" let-expanded="expanded">
  <div (click)="toggleBacketDetails(account)">
    <span>{{backetsCount}}</span>
    <i [ngClass]="{fa: true, 'fa-chevron-down': !expanded, 'fa-chevron-up': expanded}"></i>
  </div>
</ng-template>

<ng-template let-account="row" ngx-datatable-row-detail-template #rowDetailRef>
  <div *ngIf="account.containers.length; else noContainers">
    <div class="btn-group">
      <button *ngFor="let container of account.containers" (click)="selectContainer(container)" class="btn btn-secondary">{{container.name | truncate:15}}</button>
    </div>
    <p></p>
    <dlm-cloud-container-browser
      [rootPath]="'/'"
      [container]="selectedContainer"></dlm-cloud-container-browser>
  </div>
  <ng-template #noContainers>
    {{'page.cloud_stores.content.no_containers' | translate}}
  </ng-template>
</ng-template>
