<!--
  ~ Copyright  (c) 2016-2017, Hortonworks Inc.  All rights reserved.
  ~
  ~ Except as expressly permitted in a written agreement between you or your company
  ~ and Hortonworks, Inc. or an authorized affiliate or partner thereof, any use,
  ~ reproduction, modification, redistribution, sharing, lending or other exploitation
  ~ of all or any part of the contents of this software is strictly prohibited.
  -->

<div class="row">
  <div class="col-md-12">
    <dlm-page-header [title]="'page.policies.header_review'" [isFlexCenter]="true"></dlm-page-header>
  </div>
</div>
<div class="content">
  <div class="row">
    <div class="col-md-8 col-lg-6 col-sm-12">
      <div class="review-description">
        <div *ngFor="let detail of detailsInfo" class="table-row">
          <div class="text-muted table-cell">{{detail.label}}:&nbsp;</div>
          <div [innerHTML]="detail.value" class="table-cell"></div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <div class="form-footer-wrap">
        <div class="form-footer">
          <div class="pull-left" *ngIf="creationState?.error">
            <div class="alert alert-danger alert-small">
              <i class="fa fa-exclamation-circle"></i>
              <span>{{'page.policies.subpage.review.error.create_policy' | translate}}.</span>
              <span class="text-primary actionable" (click)="showErrorDetails()">{{ "page.policies.subpage.review.error.check_error_details" | translate}}</span>
            </div>
          </div>
          <div class="footer-controls pull-right">
            <button qe-attr="policy-cancel" (click)="cancelReview()" class="btn btn-default">{{'common.back' | translate}}</button>
            <button qe-attr="policy-submit" (click)="submitReview()" class="btn btn-success" [disabled]="creationState?.isInProgress">
              {{'common.submit' | translate}}
              <i class="fa fa-spinner fa-spin" *ngIf="creationState?.isInProgress"></i>
            </button>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<dlm-modal-dialog #errorDetailsDialog
  [title]="'page.policies.subpage.review.error.create_policy'"
  [showCancel]="false">
  <dlm-modal-dialog-body>
    <pre>
      {{creationState?.errorMessage?.message}}
    </pre>
  </dlm-modal-dialog-body>
</dlm-modal-dialog>
