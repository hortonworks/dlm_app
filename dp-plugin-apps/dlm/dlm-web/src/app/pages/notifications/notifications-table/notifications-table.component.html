<!--
  ~ Copyright  (c) 2016-2017, Hortonworks Inc.  All rights reserved.
  ~
  ~ Except as expressly permitted in a written agreement between you or your company
  ~ and Hortonworks, Inc. or an authorized affiliate or partner thereof, any use,
  ~ reproduction, modification, redistribution, sharing, lending or other exploitation
  ~ of all or any part of the contents of this software is strictly prohibited.
  -->

<dlm-table
  #notificationsTable
  [columns]="columns"
  [rows]="events"
>
</dlm-table>

<ng-template let-event="row" #statusTemplate>
  <dlm-event-status [event]="event"></dlm-event-status>
  <span>{{event.event}}</span>
</ng-template>

<ng-template #agoTemplate let-value="value">
  <span>{{value | fmtTz | amTimeAgo}}</span>
</ng-template>

<ng-template let-event="row" #entityTemplate>
  <span *ngIf="event.eventType === 'policyinstance' || event.eventType === 'policy'">
    <a qe-attr="go-to-policies" [routerLink]="['/policies']" [queryParams]="{'policy': getEntity(event)}">
      <span>{{getEntity(event)}}</span>
    </a>
  </span>
  <span *ngIf="event.eventType !== 'policyinstance' && event.eventType !== 'policy' ">{{getEntity(event)}}</span>
</ng-template>

<ng-template let-event="row" #logTemplate>
  <span qe-attr="show-log" *ngIf="event.eventType === 'policyinstance' || event.eventType === 'policy'" class="text-primary actionable" (click)="showLog(event)">{{ "page.notifications.view_log" | translate }}</span>
</ng-template>
