<!--
  ~ Copyright  (c) 2016-2017, Hortonworks Inc.  All rights reserved.
  ~
  ~ Except as expressly permitted in a written agreement between you or your company
  ~ and Hortonworks, Inc. or an authorized affiliate or partner thereof, any use,
  ~ reproduction, modification, redistribution, sharing, lending or other exploitation
  ~ of all or any part of the contents of this software is strictly prohibited.
  -->

<span class="notifications-group pull-right">
  <span class="alerts-label dropdown-toggle" data-toggle="dropdown" qe-attr="notifications-dropdown-toggler">
    <span class="fa fa-fw fa-bell"></span>
    <span *ngIf="newEventsCount && newEventsCount > 0" class="numberCircle alert-crit-count">{{ newEventsCount }}</span>
  </span>
  <div id="notifications-dropdown" class="dropdown-menu row">
    <div class="popup-arrow-up"></div>
    <div class="notifications-header col-xs-12">
      <div class="notifications-title">Notifications</div>
    </div>
    <div class="notifications-body col-xs-12" *ngIf="events?.length; else noEventsTemplate">
      <table class="alerts-table table table-hover">
        <tbody *ngIf="events?.length; else noEventsTemplate">
          <tr *ngFor="let event of events | slice:0:5">
            <td *ngIf="event.state !== ''" class="status">
              <dlm-event-status [event]="event"></dlm-event-status>
            </td>
            <td class="content">
              <div class="name">{{ event.event }}</div>
              <div class="description">
                <dlm-event-message [event]="event"></dlm-event-message>
              </div>
              <div class="timestamp">{{ event.timestamp | fmtTz | amTimeAgo }}</div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <ng-template #noEventsTemplate>
      <div class="col-xs-12">
        <span class="text-muted">
          {{'topnav.notifications.empty_list' | translate}}
        </span>
      </div>
    </ng-template>
    <div class="notifications-footer col-xs-12">
      <button qe-attr="go-to-notifications" type="button" class="btn btn-primary pull-right" (click)="viewAllClickHandler()">View All</button>
    </div>
  </div>
</span>
