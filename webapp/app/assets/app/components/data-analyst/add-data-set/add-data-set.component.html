<div class="mdl-grid">
    <div class="mdl-cell mdl-cell--12-col">
        <bread-crumb></bread-crumb>
        <div class="mdl-typography--headline mdl-typography--font-light">ADD DATA SET</div>
        <p> Add a data set by applying filters on data sources like Hive, HBase and File System. Multiple filter conditions can be used for each data source, the results from all the filters will form a data set </p>

        <br>

        <div class="mdl-grid mdl-grid--no-spacing">
            <div class="mdl-cell mdl-cell--1-col nav">
                <div class="mdl-list">
                    <div class="mdl-list__item" (click)="mainActiveTab = mainTab.INFORMATION" [ngClass]="{'is-active': mainActiveTab === mainTab.INFORMATION}">
                        <span class="mdl-list__item-primary-content mdl-typography--caption">
                          <span> <span class="number"> 01 </span> Information </span>
                        </span>
                    </div>
                    <div class="mdl-list__item" (click)="mainActiveTab = mainTab.DATA" [ngClass]="{'is-active': mainActiveTab === mainTab.DATA}">
                        <span class="mdl-list__item-primary-content mdl-typography--caption">
                          <span> <span class="number"> 02 </span> Data </span>
                        </span>
                    </div>
                    <div class="mdl-list__item" (click)="mainActiveTab = mainTab.SUMMARY" [ngClass]="{'is-active': mainActiveTab === mainTab.SUMMARY}">
                        <span class="mdl-list__item-primary-content mdl-typography--caption">
                          <span> <span class="number"> 03 </span> Summary </span>
                        </span>
                    </div>
                </div>
            </div>

            <div class="mdl-cell mdl-cell--11-col content">
                <section *ngIf="mainActiveTab === mainTab.INFORMATION">
                    <div class="title-text"> <span class="number"> 01 </span> Information </div>
                    <br>

                    <div class="mdl-typography--body-1"> Name </div>
                    <input type="text" [(ngModel)]="dataSet.name">
                    <div class="mdl-typography--body-1"> Description </div>
                    <textarea rows="6" [(ngModel)]="dataSet.description"> </textarea>
                    <div class="mdl-typography--body-1"> Pemissions </div>
                    <input type="text" [(ngModel)]="dataSet.permissions">
                    <div class="mdl-typography--body-1"> Category </div>
                    <input type="text" [(ngModel)]="dataSet.category">
                    <div class="mdl-typography--body-1">Data Lake</div>
                    <drop-down>
                        <select  #dataCeneterName (change)="onDataCenterChange(dataCeneterName.value)" [(ngModel)]="dataSet.dataCenter">
                            <option value="" selected [value]="'new'">Select</option>
                            <option *ngFor="let dataCenter of dataCenters" [value]="dataCenter.name"> {{ dataCenter.name }} </option>
                        </select>
                    </drop-down>

                    <br>

                    <div class="mt-1">
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--green" (click)="mainActiveTab = mainTab.DATA">
                            SAVE & CONTINUE
                        </button>

                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-color--grey-300" (click)="back()">
                            CANCEL
                        </button>

                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-color--grey-300" (click)="onSave()">
                            SAVE
                        </button>
                    </div>
                </section>

                <section *ngIf="mainActiveTab === mainTab.DATA">
                    <div class="title-text"> <span class="number"> 02 </span> Data </div>
                    <br>

                    <div class="mdl-layout mdl-js-layout">
                        <header class="mdl-layout__header mdl-layout__header--scroll">
                            <div class="mdl-layout__header-row">
                                <nav class="mdl-navigation">
                                    <div class="mdl-navigation__link" (click)="dataActiveTab = dataTab.HIVE" [ngClass]="{'is-active': (dataActiveTab===dataTab.HIVE)}">
                                        HIVE {{ dataSet['hiveCount'] }}
                                    </div>
                                    <div class="mdl-navigation__link" (click)="dataActiveTab = dataTab.HBASE" [ngClass]="{'is-active': (dataActiveTab===dataTab.HBASE)}">
                                        HBASE {{ dataSet['hbaseCount'] }}
                                    </div>
                                    <div class="mdl-navigation__link" (click)="dataActiveTab = dataTab.HDFS" [ngClass]="{'is-active': (dataActiveTab===dataTab.HDFS)}">
                                        FILES {{ dataSet['hdfsCount'] }}
                                    </div>
                                </nav>
                            </div>
                        </header>
                        <main class="mdl-layout__content">
                            <section *ngIf="dataActiveTab === dataTab.HIVE">
                                <data-plane-search [searchParamWrappers]="hiveSearchParamWrappers" (searchFilters)="addFilterAndSearch($event, 'hive')" [dataSource]="'hive'"> </data-plane-search>
                                <div *ngFor="let hiveFilterWrapper of hiveFiltersWrapper" style="margin-top: 15px;">
                                    <chips-bar [searchParams]="hiveFilterWrapper.searchParams" ></chips-bar>
                                    <div id="progactive" style="width:200px" class="mdl-js-progress mdl-progress--indeterminate" [hidden]="hiveFilterWrapper.progress"></div>
                                    <table style="width: 100%" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" *ngIf="hiveFilterWrapper.data.length > 0">
                                        <thead>
                                        <tr>
                                            <th class="mdl-data-table__cell--non-numeric">NAME</th>
                                            <th class="mdl-data-table__cell--non-numeric">OWNER</th>
                                            <th class="mdl-data-table__cell--non-numeric">CREATE TIME</th>
                                            <th class="mdl-data-table__cell--non-numeric">NUM OF ROWS</th>
                                            <th class="mdl-data-table__cell--non-numeric">TABLE TYPE</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let hiveTable of hiveFilterWrapper.data">
                                            <td class="mdl-data-table__cell--non-numeric">{{ hiveTable.name }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hiveTable.owner }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hiveTable.createTime }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hiveTable.parameters.numRows }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hiveTable.tableType }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </section>
                            <section *ngIf="(dataActiveTab===dataTab.HBASE)">
                                <data-plane-search [searchParamWrappers]="hbaseSearchParamWrappers" (searchFilters)="addFilterAndSearch($event, 'hbase')" [dataSource]="'hbase'"> </data-plane-search>
                                <div *ngFor="let hbaseFilterWrapper of hbaseFiltersWrapper" style="margin-top: 15px;">
                                    <chips-bar [searchParams]="hbaseFilterWrapper.searchParams" ></chips-bar>
                                    <table style="width: 100%" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" *ngIf="hbaseFilterWrapper.data.length > 0">
                                        <thead>
                                        <tr>
                                            <th class="mdl-data-table__cell--non-numeric">NAME</th>
                                            <th class="mdl-data-table__cell--non-numeric">OWNER</th>
                                            <th class="mdl-data-table__cell--non-numeric">CREATE TIME</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let hbaseTable of hbaseFilterWrapper.data">
                                            <td class="mdl-data-table__cell--non-numeric">{{ hbaseTable.name }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hbaseTable.owner }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hbaseTable.$systemAttributes$.createdTime }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>

                            </section>
                            <section *ngIf="(dataActiveTab===dataTab.HDFS)">
                                <data-plane-search [searchParamWrappers]="hdfsSearchParamWrappers"  (searchFilters)="addFilterAndSearch($event, 'hdfs')" [dataSource]="'hdfs'"> </data-plane-search>
                                <div *ngFor="let hdfsFilterWrapper of hdfsFiltersWrapper">
                                    <chips-bar [searchParams]="hdfsFilterWrapper.searchParams" ></chips-bar>
                                    <table style="width: 100%" class="mdl-data-table mdl-js-data-table mdl-data-table--selectable mdl-shadow--2dp" *ngIf="hdfsFilterWrapper.data.length > 0">
                                        <thead>
                                        <tr>
                                            <th class="mdl-data-table__cell--non-numeric">NAME</th>
                                            <th class="mdl-data-table__cell--non-numeric">OWNER</th>
                                            <th class="mdl-data-table__cell--non-numeric">SIZE</th>
                                            <th class="mdl-data-table__cell--non-numeric">URI</th>
                                        </tr>
                                        </thead>
                                        <tbody>
                                        <tr *ngFor="let hdfsTable of hdfsFilterWrapper.data">
                                            <td class="mdl-data-table__cell--non-numeric">{{ hdfsTable.name }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hdfsTable.owner }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hdfsTable.size }}</td>
                                            <td class="mdl-data-table__cell--non-numeric">{{ hdfsTable.uri }}</td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </section>
                        </main>
                    </div>

                    <div class="mt-1">
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--green" (click)="mainActiveTab = mainTab.SUMMARY">
                            SAVE & CONTINUE
                        </button>

                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-color--grey-300" (click)="back()">
                            CANCEL
                        </button>

                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-color--grey-300" (click)="onSave()">
                            SAVE
                        </button>
                    </div>
                </section>

                <section *ngIf="mainActiveTab === mainTab.SUMMARY">
                    <div class="mdl-grid">
                        <div class="mdl-cell mdl-cell--1-col">
                            <div class="summary-label mdl-typography--body-2"> Name         </div>
                            <div class="summary-label mdl-typography--body-2"> Category     </div>
                            <div class="summary-label mdl-typography--body-2"> Host         </div>
                            <div class="summary-label mdl-typography--body-2"> Data Center  </div>
                            <div class="summary-label mdl-typography--body-2"> Description  </div>
                            <div class="summary-label mdl-typography--body-2"> HIVE Filters  </div>
                            <div class="summary-label mdl-typography--body-2"> HBASE Filters  </div>
                            <div class="summary-label mdl-typography--body-2"> HDFS Filters  </div>
                        </div>
                        <div class="mdl-cell mdl-cell-8-col">
                            <div class="summary-value mdl-typography--body-1"> {{ dataSet.name }} </div>
                            <div class="summary-value mdl-typography--body-1"> {{ dataSet.category }} </div>
                            <div class="summary-value mdl-typography--body-1"> {{ dataSet.ambariHost }} </div>
                            <div class="summary-value mdl-typography--body-1"> {{ dataSet.dataCenter }} </div>
                            <div class="summary-value mdl-typography--body-1"> {{ dataSet.description }} </div>
                            <div class="summary-value mdl-typography--body-1" [innerHTML]="getFiltersWrapperSummary(hiveFiltersWrapper)"> </div>
                            <div class="summary-value mdl-typography--body-1" [innerHTML]="getFiltersWrapperSummary(hbaseFiltersWrapper)"> </div>
                            <div class="summary-value mdl-typography--body-1" [innerHTML]="getFiltersWrapperSummary(hdfsFiltersWrapper)"> </div>
                        </div>
                        <div class="mdl-cell mdl-cell--3-col">
                        </div>
                    </div>
                    <div class="mt-1">
                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored mdl-color--green" (click)="onSave()">
                            SAVE
                        </button>

                        <button class="mdl-button mdl-js-button mdl-button--raised mdl-color--grey-300" (click)="back()">
                            CANCEL
                        </button>
                    </div>
                </section>

            </div>
        </div>

    </div>
</div>
